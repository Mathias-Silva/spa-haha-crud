<div class="massagem-form-container">
  <div class="form-header">
    <h3 *ngIf="massagem">Editar Massagem</h3>
    <h3 *ngIf="!massagem">Cadastrar Nova Massagem</h3>
    <p class="form-subtitle">{{ massagem ? 'Atualize os dados da massagem' : 'Preencha os dados para cadastrar uma nova massagem' }}</p>
  </div>

  <form [formGroup]="form" (ngSubmit)="salvar()" class="massagem-form">
    <div class="form-group">
      <label for="nome">
        <span class="label-text">Nome da Massagem</span>
        <span class="required">*</span>
      </label>
      <input 
        id="nome" 
        type="text" 
        formControlName="nome" 
        placeholder="Ex: Massagem Relaxante"
        [class.invalid]="form.get('nome')?.invalid && form.get('nome')?.touched"
        required />
      <div *ngIf="form.get('nome')?.invalid && form.get('nome')?.touched" class="error-message">
        <span *ngIf="form.get('nome')?.errors?.['required']">O nome é obrigatório</span>
        <span *ngIf="form.get('nome')?.errors?.['minlength']">O nome deve ter pelo menos 3 caracteres</span>
      </div>
    </div>

    <div class="form-group">
      <label for="descricao">
        <span class="label-text">Descrição</span>
        <span class="required">*</span>
      </label>
      <textarea 
        id="descricao" 
        formControlName="descricao" 
        rows="4"
        placeholder="Descreva os benefícios e características desta massagem..."
        [class.invalid]="form.get('descricao')?.invalid && form.get('descricao')?.touched"
        required></textarea>
      <div *ngIf="form.get('descricao')?.invalid && form.get('descricao')?.touched" class="error-message">
        <span *ngIf="form.get('descricao')?.errors?.['required']">A descrição é obrigatória</span>
        <span *ngIf="form.get('descricao')?.errors?.['minlength']">A descrição deve ter pelo menos 10 caracteres</span>
      </div>
    </div>

    <div class="form-group">
      <label for="preco">
        <span class="label-text">Preço (R$)</span>
        <span class="required">*</span>
      </label>
      <div class="preco-input-wrapper">
        <span class="currency-symbol">R$</span>
        <input 
          id="preco" 
          type="number" 
          formControlName="preco" 
          placeholder="0.00"
          step="0.01"
          min="0"
          [class.invalid]="form.get('preco')?.invalid && form.get('preco')?.touched"
          required />
      </div>
      <div *ngIf="form.get('preco')?.invalid && form.get('preco')?.touched" class="error-message">
        <span *ngIf="form.get('preco')?.errors?.['required']">O preço é obrigatório</span>
        <span *ngIf="form.get('preco')?.errors?.['min']">O preço deve ser maior que R$ 0,01</span>
      </div>
    </div>

    <div *ngIf="erro" class="error-alert">
      <span class="error-icon">⚠️</span>
      <span>{{ erro }}</span>
    </div>

    <div class="form-actions">
      <button 
        type="submit" 
        class="btn-salvar"
        [disabled]="form.invalid">
        <span *ngIf="massagem">Atualizar</span>
        <span *ngIf="!massagem">Cadastrar</span>
      </button>
      <button 
        type="button" 
        class="btn-cancelar"
        *ngIf="massagem"
        (click)="cancelar()">
        Cancelar
      </button>
    </div>
  </form>
</div>
